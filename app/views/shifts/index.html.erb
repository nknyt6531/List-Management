<h2><%= @user.name %></h2>


<%= form_with model: @shift, local:true do |f| %>
  <h4>日付</h4>
  <%= f.date_select :date,
                    use_two_digit_numbers: true,
                    start_year: 2022,
                    end_year: 2022,
                    default: Date.today,
                    date_separator: '/' %>
  <h4>開始</h4>
  <%= f.time_field :start %>
  <h4>終了</h4>
  <%= f.time_field :finish %>
  <%= f.submit 'シフト入力' %>
<% end %>

<% if @user.shifts.present? %>
  <%= month_calendar events: @user.shifts do |date, shifts| %>
    <%= date.day %>
    <% shifts.each do |shift| %>
      <%= link_to edit_shift_path(shift.id) do %>
        <%= shift.start.strftime('%X') %>
        <%= shift.finish.strftime('%X') %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<table>
  <thead>
    <tr>
      <th>日付</th>
      <th>開始</th>
      <th>終了</th>
      <th>稼働時間</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @shifts.each do |user| %>
    <tr>
      <td><%= user.date %></td>
      <td><%= user.start.strftime("%X") %></td>
      <td><%= user.finish.strftime("%X") %></td>
      <td><%= user.working_time %></td>
      <td><%= link_to "編集", edit_shift_path(@shifts) %></td>
      <td><%= link_to "削除", shift_path(@shifts), method: :delete %>, </td>
    </tr>
    <% end %>
  </tbody>
</table>